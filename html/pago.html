<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Resumen de Compra</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="../css/style.css">
</head>
<body>

  <section>
    <h1>Resumen de Compra</h1>
    <ul id="resumen"></ul>
    <p id="total"></p>

    <h2>Método de Pago</h2>
    <select id="metodoPago">
      <option value="WebPay">WebPay</option>
      <option value="Transferencia">Transferencia Bancaria</option>
    </select>

    <button onclick="confirmarPago()">Pagar</button>
  </section>

  <script>
    const carrito = JSON.parse(localStorage.getItem("carrito")) || [];
    const resumen = document.getElementById("resumen");
    const totalElemento = document.getElementById("total");
    let total = 0;

    // Mostrar productos
    carrito.forEach(producto => {
      const li = document.createElement("li");
      li.textContent = `${producto.nombre} - $${producto.precio} CLP`;
      resumen.appendChild(li);
      total += producto.precio;
    });

    totalElemento.textContent = `Total: $${total} CLP`;

    function confirmarPago() {
      const metodo = document.getElementById("metodoPago").value;
      localStorage.setItem("metodoPago", metodo);

      if (carrito.length === 0) {
        alert("El carrito está vacío.");
        return;
      }

      if (metodo === "WebPay") {
        window.location.href = "webpay.html";
      } else {
        window.location.href = "pago-exitoso.html";
      }
    }
  </script>

</body>
</html>

